#!/usr/bin/env bash
# This script creates a PID file in /var/run/holbertonscript.pid
# and continuously prints "To infinity and beyond" to the console
# every 2 seconds.
# Trap SIGTERM signals and perform cleanup
# Remove the pid file and exit when a SIGTERM signal is received
trap "echo 'I hate the kill command' \
    && rm /var/run/holbertonscript.pid \
    && exit" SIGTERM
# Trap SIGINT signals and echo a message
# SIGINT is the default signal generated by Ctrl+C
trap "echo 'Y U no love me?!'" SIGINT
# Trap SIGQUIT signals and perform cleanup
# Same as SIGTERM but also has the effect of generating a core dump
trap "echo 'SIGQUIT received' \
    && rm /var/run/holbertonscript.pid \
    && exit" SIGQUIT
# Write the PID of the current shell script to a file
echo $$ >/var/run/holbertonscript.pid
# Start an infinite loop
while true; do
    echo "To infinity and beyond"
    sleep 2
done
#!/bin/bash

# Create the PID file
echo $$ > /var/run/myscript.pid

# Start an infinite loop
while true; do
    echo "To infinity and beyond"

    # Wait for 2 seconds
    sleep 2
done &

# Store the process ID of the loop in a variable
pid=$!

# Trap SIGTERM signals and perform cleanup
trap 'echo "I hate the kill command" && rm /var/run/myscript.pid && kill $pid && exit' SIGTERM

# Trap SIGINT signals and echo a message
trap 'echo "Y U no love me?!"' SIGINT

# Trap SIGQUIT signals and perform cleanup
trap 'echo "SIGQUIT received" && rm /var/run/myscript.pid && kill $pid && exit' SIGQUIT

# Wait for the loop to finish
wait $pid
