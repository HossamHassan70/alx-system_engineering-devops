#!/usr/bin/env bash
# This script creates a PID file in /var/run/holbertonscript.pid
# and continuously prints "To infinity and beyond" to the console
# every 2 seconds.
# It also traps SIGTERM, SIGINT, and SIGQUIT signals
# to perform cleanup before exiting.

# Trap SIGTERM signals and perform cleanup
# Remove the pid file and exit when a SIGTERM signal is received
trap "echo 'I hate the kill command' \
    && rm /var/run/holbertonscript.pid \
    && exit" SIGTERM

# Trap SIGINT signals and echo a message
# SIGINT is the default signal generated by Ctrl+C
trap "echo 'Y U no love me?!'" SIGINT

# Trap SIGQUIT signals and perform cleanup
# Same as SIGTERM but also has the effect of generating a core dump
trap "echo 'SIGQUIT received' \
    && rm /var/run/holbertonscript.pid \
    && exit" SIGQUIT

# Write the PID of the current shell script to a file
echo $$ >/var/run/holbertonscript.pid

# Start an infinite loop
while true; do
    # Print the message "To infinity and beyond" to the console
    echo "To infinity and beyond"

    # Sleep for 2 seconds before the next iteration of the loop
    sleep 2
done
